<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Tor-Interface"><title>tor_interface - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-916cea96.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="tor_interface" data-themes="" data-resource-suffix="" data-rustdoc-version="1.87.0 (17067e9ac 2025-05-09)" data-channel="1.87.0" data-search-js="search-e7298875.js" data-settings-js="settings-d72f25bb.js" ><script src="../static.files/storage-82c7156e.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-fb8c74a8.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../tor_interface/index.html">tor_<wbr>interface</a><span class="version">0.5.0</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section id="rustdoc-toc"><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#tor-interface" title="Tor-Interface">Tor-Interface</a><ul><li><a href="#overview" title="Overview">Overview</a></li><li><a href="#-warning-" title="⚠ Warning ⚠">⚠ Warning ⚠</a></li><li><a href="#usage" title="Usage">Usage</a></li></ul></li></ul><h3><a href="#modules">Crate Items</a></h3><ul class="block"><li><a href="#modules" title="Modules">Modules</a></li></ul></section><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <span>tor_interface</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/tor_interface/lib.rs.html#1-35">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="tor-interface"><a class="doc-anchor" href="#tor-interface">§</a>Tor-Interface</h2>
<p>Developer-friendly crate providing connectivity to the <a href="https://en.wikipedia.org/wiki/Tor_(network)">Tor Network</a> and functionality for interacting with Tor-specific cryptographic types.</p>
<p>This crate is <em>not</em> meant to be a general purpose Tor Controller nor does it aim to expose all of the functionality of the underlying Tor implementations. This crate also does not implement any of the Tor Network functionality itself, instead wrapping lower-level implementations.</p>
<h3 id="overview"><a class="doc-anchor" href="#overview">§</a>Overview</h3>
<p>The <code>tor-interface</code> crate provides the <code>TorProvider</code> trait with 3 concrete implementations:</p>
<ul>
<li>ArtiClientTorClient: an experimental wrapper around the <a href="https://crates.io/crates/arti-client"><code>arti-client</code></a> crate; enabled using the <strong>arti-client-tor-provider</strong> feature flag.</li>
<li>LegacyTorClient: a wrapper around either an owned or system-provided legacy c-tor daemon (aka ‘little-t tor’) with some basic configuration options; enabled using the <strong>legacy-tor-provider</strong> feature flag.</li>
<li>MockTorClient: an in-process, mock implementation which makes no actual connections outside of localhost; enabled with the <strong>mock-tor-provider</strong> feature flag.</li>
</ul>
<p>The <code>TorProvider</code> trait defines methods for connecting to various types of target addresses (ip, domains, and onion-services) and for creating onion-services.</p>
<h3 id="-warning-"><a class="doc-anchor" href="#-warning-">§</a>⚠ Warning ⚠</h3>
<p>The <strong>arti-client-tor-provider</strong> feature is experimental is not fully implemented. It also depends on the <a href="https://crates.io/crates/arti-client"><code>arti-client</code></a> crate which is still under active development and is generally not yet ready for production use.</p>
<h3 id="usage"><a class="doc-anchor" href="#usage">§</a>Usage</h3>
<p>The following code snippet creates a <code>LegacyTorClient</code> which starts a bundled tor daemon, bootstraps, and attempts to connect to <a href="www.example.com">www.example.com</a>.</p>

<div class="example-wrap ignore"><a href="#" class="tooltip" title="This example is not tested">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="comment">// construct legacy tor client config
</span><span class="kw">let </span>tor_path = std::path::PathBuf::from_str(<span class="string">"/usr/bin/tor"</span>).unwrap();
<span class="kw">let </span><span class="kw-2">mut </span>data_path = std::env::temp_dir();
data_path.push(<span class="string">"tor_data"</span>);

<span class="kw">let </span>tor_config = LegacyTorClientConfig::BundledTor {
    tor_bin_path: tor_path,
    data_directory: data_path,
    proxy_settings: <span class="prelude-val">None</span>,
    allowed_ports: <span class="prelude-val">None</span>,
    pluggable_transports: <span class="prelude-val">None</span>,
    bridge_lines: <span class="prelude-val">None</span>,
};
<span class="comment">// create client from config
</span><span class="kw">let </span><span class="kw-2">mut </span>tor_client = LegacyTorClient::new(tor_config).unwrap();

<span class="comment">// bootstrap tor
</span><span class="kw">let </span><span class="kw-2">mut </span>bootstrap_complete = <span class="bool-val">false</span>;
<span class="kw">while </span>!bootstrap_complete {
    <span class="kw">for </span>event <span class="kw">in </span>tor_client.update().unwrap().iter() {
        <span class="kw">match </span>event {
            TorEvent::BootstrapComplete =&gt; {
                bootstrap_complete = <span class="bool-val">true</span>;
            },
            <span class="kw">_ </span>=&gt; {},
        }
    }
}

<span class="comment">// connect to example.com
</span><span class="kw">let </span>target_addr = TargetAddr::from_str(<span class="string">"www.example.com:80"</span>).unwrap();
<span class="kw">let </span><span class="kw-2">mut </span>stream: OnionStream = tor_client.connect(target_addr, <span class="prelude-val">None</span>).unwrap();
<span class="comment">// and convert to a std::net::TcpStream
</span><span class="kw">let </span>stream: TcpStream = stream.into();</code></pre></div>
</div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><dl class="item-table"><dt><a class="mod" href="arti_client_tor_client/index.html" title="mod tor_interface::arti_client_tor_client">arti_<wbr>client_<wbr>tor_<wbr>client</a></dt><dd>Implementation of an in-process <a href="https://crates.io/crates/arti-client"><code>arti-client</code></a>-based <code>TorProvider</code></dd><dt><a class="mod" href="arti_process/index.html" title="mod tor_interface::arti_process">arti_<wbr>process</a></dt><dt><a class="mod" href="arti_tor_client/index.html" title="mod tor_interface::arti_tor_client">arti_<wbr>tor_<wbr>client</a></dt><dd>Implementation of an out-of-process <a href="https://crates.io/crates/arti"><code>arti</code></a>-based <code>TorProvider</code></dd><dt><a class="mod" href="censorship_circumvention/index.html" title="mod tor_interface::censorship_circumvention">censorship_<wbr>circumvention</a></dt><dd>Censorship circumvention configuration for pluggable-transports and bridge settings</dd><dt><a class="mod" href="legacy_tor_client/index.html" title="mod tor_interface::legacy_tor_client">legacy_<wbr>tor_<wbr>client</a></dt><dd>Implementation of an out-of-process legacy <a href="https://gitlab.torproject.org/tpo/core/tor">c-tor daemon</a>-based <code>TorProvider</code></dd><dt><a class="mod" href="legacy_tor_version/index.html" title="mod tor_interface::legacy_tor_version">legacy_<wbr>tor_<wbr>version</a></dt><dd>Legacy c-tor daemon version.</dd><dt><a class="mod" href="mock_tor_client/index.html" title="mod tor_interface::mock_tor_client">mock_<wbr>tor_<wbr>client</a></dt><dd>Implementation of a local, in-process, mock <code>TorProvider</code> for testing.</dd><dt><a class="mod" href="proxy/index.html" title="mod tor_interface::proxy">proxy</a></dt><dd>Proxy settings</dd><dt><a class="mod" href="tor_crypto/index.html" title="mod tor_interface::tor_crypto">tor_<wbr>crypto</a></dt><dd>Tor-specific cryptographic primitives, operations, and conversion functions.</dd><dt><a class="mod" href="tor_provider/index.html" title="mod tor_interface::tor_provider">tor_<wbr>provider</a></dt><dd>Traits and types for connecting to the Tor Network.</dd></dl><script type="text/json" id="notable-traits-data">{"&[u8]":"<h3>Notable traits for <code>&amp;[<a class=\"primitive\" href=\"https://doc.rust-lang.org/1.87.0/std/primitive.u8.html\">u8</a>]</code></h3><pre><code><div class=\"where\">impl <a class=\"trait\" href=\"https://doc.rust-lang.org/1.87.0/std/io/trait.Read.html\" title=\"trait std::io::Read\">Read</a> for &amp;[<a class=\"primitive\" href=\"https://doc.rust-lang.org/1.87.0/std/primitive.u8.html\">u8</a>]</div>","&mut [u8]":"<h3>Notable traits for <code>&amp;mut [<a class=\"primitive\" href=\"https://doc.rust-lang.org/1.87.0/std/primitive.u8.html\">u8</a>]</code></h3><pre><code><div class=\"where\">impl <a class=\"trait\" href=\"https://doc.rust-lang.org/1.87.0/std/io/trait.Write.html\" title=\"trait std::io::Write\">Write</a> for &amp;mut [<a class=\"primitive\" href=\"https://doc.rust-lang.org/1.87.0/std/primitive.u8.html\">u8</a>]</div>"}</script></section></div></main></body></html>