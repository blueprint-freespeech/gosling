# see https://github.com/eqrion/cbindgen/blob/master/docs.md

# platform defines derived from: https://loumalouomega.github.io/OSPreprocessor/

header ="""// libgosling header autogenerated by cbindgen, do not modify"""

after_includes = """
// gosling platform defines
#if (defined(_WIN32) || defined(_WIN64))
#   define GOSLING_PLATFORM_WINDOWS
#elif (defined(__linux__) || defined(__linux) || defined(linux) || defined(__gnu_linux__))
#   define GOSLING_PLATFORM_LINUX
#elif (defined(__APPLE__) && defined(__MACH__))
#   define GOSLING_PLATFORM_MACOS
#endif

// per-platform includes
#if defined(GOSLING_PLATFORM_WINDOWS)
#   include <winsock2.h>
#elif defined(GOSLING_PLATFORM_LINUX) || defined(GOSLING_PLATFORM_MACOS)
#   include <sys/socket.h>
#endif
"""

tab_width = 4
language = "C"
cpp_compat = true
include_guard = "LIBGOSLING_H"
usize_is_size_t = true
documentation = true
documentation_style = "c99"
line_length = 80
only_target_dependencies = true

[defines]
"target_os = windows" = "GOSLING_PLATFORM_WINDOWS"
"target_os = linux" = "GOSLING_PLATFORM_LINUX"
"target_os = macos" = "GOSLING_PLATFORM_MACOS"

[fn]
args = "vertical"

[enum]
rename_variants = "SnakeCase"
enum_class = true
prefix_with_name = true

[export.rename]
"RawSocket" = "SOCKET"
"RawFd" = "int"

# typedefs
GoslingHandshakeHandle = "gosling_handshake_handle_t"

# structs

GoslingLibrary = "gosling_library"
GoslingError = "gosling_error"
GoslingContext = "gosling_context"
GoslingEd25519PrivateKey = "gosling_ed25519_private_key"
GoslingV3OnionServiceId = "gosling_v3_onion_service_id"
GoslingX25519PrivateKey = "gosling_x25519_private_key"
GoslingX25519PublicKey = "gosling_x25519_public_key"

# callbacks

GoslingEndpointClientHandshakeCompletedCallback = "gosling_endpoint_client_handshake_completed_callback_t"
GoslingEndpointClientHandshakeFailedCallback = "gosling_endpoint_client_handshake_failed_callback_t"
GoslingEndpointServerChannelSupportedCallback = "gosling_endpoint_server_channel_supported_callback_t"
GoslingEndpointServerHandshakeCompletedCallback = "gosling_endpoint_server_handshake_completed_callback_t"
GoslingEndpointServerHandshakeFailedCallback = "gosling_endpoint_server_handshake_failed_callback_t"
GoslingEndpointServerHandshakeRejectedCallback = "gosling_endpoint_server_handshake_rejected_callback_t"
GoslingEndpointServerHandshakeStartedCallback = "gosling_endpoint_server_handshake_started_callback_t"
GoslingEndpointServerPublishedCallback = "gosling_endpoint_server_published_callback_t"
GoslingIdentityClientHandshakeBuildChallengeResponseCallback = "gosling_identity_client_handshake_build_challenge_response_callback_t"
GoslingIdentityClientHandshakeChallengeResponseSizeCallback = "gosling_identity_client_handshake_challenge_response_size_callback_t"
GoslingIdentityClientHandshakeCompletedCallback = "gosling_identity_client_handshake_completed_callback_t"
GoslingIdentityClientHandshakeFailedCallback = "gosling_identity_client_handshake_failed_callback_t"
GoslingIdentityServerEndpointSupportedCallback = "gosling_identity_server_endpoint_supported_callback_t"
GoslingIdentityServerHandshakeBuildChallengeCallback = "gosling_identity_server_handshake_build_challenge_callback_t"
GoslingIdentityServerHandshakeChallengeSizeCallback = "gosling_identity_server_handshake_challenge_size_callback_t"
GoslingIdentityServerHandshakeClientAllowedCallback = "gosling_identity_server_handshake_client_allowed_callback_t"
GoslingIdentityServerHandshakeCompletedCallback = "gosling_identity_server_handshake_completed_callback_t"
GoslingIdentityServerHandshakeFailedCallback = "gosling_identity_server_handshake_failed_callback_t"
GoslingIdentityServerHandshakeRejectedCallback = "gosling_identity_server_handshake_rejected_callback_t"
GoslingIdentityServerHandshakeStartedCallback = "gosling_identity_server_handshake_started_callback_t"
GoslingIdentityServerHandshakeVerifyChallengeResponseCallback = "gosling_identity_server_handshake_verify_challenge_response_callback_t"
GoslingIdentityServerPublishedCallback = "gosling_identity_server_published_callback_t"
GoslingTorBootstrapCompletedCallback = "gosling_tor_bootstrap_completed_callback_t"
GoslingTorBootstrapStatusReceivedCallback = "gosling_tor_bootstrap_status_received_callback_t"
GoslingTorLogReceivedCallback = "gosling_tor_log_received_callback_t"
